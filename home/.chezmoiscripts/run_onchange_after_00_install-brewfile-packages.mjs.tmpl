#!/usr/bin/env zx

// Re-run this script when the Brewfile changes
// Brewfile hash: {{ include "dot_Brewfile.tmpl" | sha256sum }}

// Install packages from Brewfile if it exists (only if Homebrew is available)
try {
  await $`command -v brew`
  
  try {
    await fs.access(`${process.env.HOME}/.Brewfile`)
    
    console.log("üìã Installing packages from Brewfile...")
    process.env.HOMEBREW_BUNDLE_FILE = `${process.env.HOME}/.Brewfile`
    await $`brew bundle install`
  } catch (error) {
    console.log("‚ö†Ô∏è  No Brewfile found, skipping package installation")
  }
} catch (error) {
  console.log("‚ö†Ô∏è  Homebrew not available, skipping package installation")
}
